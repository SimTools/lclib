#define LCLIB_TMPL "../../../config/lclib.tmpl"
#include LCLIB_TMPL

SHELL	= /bin/sh

HOMEDIR = ../../..
INCPATH = -I$(HOMEDIR)/util/lcfull/src \
	  -I$(HOMEDIR)/util/com 
SRCDIR	= ../src

OBJS    = dsbs51.o bs51ri.o bs51rt.o bs51ji.o bs51ev.o \
	bs51rb.o bs51wb.o bs51rs.o bs51dt.o usrout.o

OBJF	= bases.o bhinit.o bhplot.o bhrset.o bhsave.o \
	bhsum.o bscast.o bschck.o bsdate.o bsdsum.o bsetgu.o \
	bsetgv.o bsinfo.o bsinit.o bsdims.o bsgrid.o bsparm.o \
	bsintg.o bsisum.o bslist.o bsordr.o bsprnt.o bsread.o \
	bstcnv.o bstime.o bsunix.o bsutim.o bswrit.o dhfill.o \
	dhinit.o dhplot.o drloop.o drn.o shcler.o shfill.o \
	shinit.o shplot.o shrset.o shupdt.o spchck.o sphist.o \
	spinfo.o sprgen.o spring.o xhchck.o xhfill.o xhinit.o \
	xhordr.o xhplot.o xhrnge.o xhsave.o xhscle.o


SRCF  = $(patsubst %.o,$(SRCDIR)/%.f,$(OBJF))
OOBJF = $(patsubst %.o,$(SRCDIR)/%.o,$(OBJF))

OBJC	= uxdate.o uxdate_.o uxtime.o uxtime_.o

SRCC  = $(patsubst %.o,$(SRCDIR)/%.c,$(OBJC))
OOBJC = $(patsubst %.o,$(SRCDIR)/%.o,$(OBJC))

$(OOBJF): $(SRCF)
	(cd ../src; make)

$(OOBJC): $(SRCC)
	(cd ../src; make)

$(OBJF): $(OOBJF)
	ln -sf ../src/$*.o $*.o

$(OBJC): $(OOBJC)
	ln -sf ../src/$*.o $*.o

#######################

ALLOBJ     = $(OBJS) $(OBJF) $(OBJC)
LIBNAME	   = BASESV5.1
INSTALLDIR = $(HOMEDIR)/lib

#######################
#ifdef DOSHRLIB
SharedLibraryTarget($(LIBNAME),$(SOREV),$(ALLOBJ),.,.)
InstallSharedLibrary($(LIBNAME),$(SOREV),$(INSTALLDIR))
#endif
NormalLibraryTarget($(LIBNAME), $(ALLOBJ) )
InstallLibrary($(LIBNAME),$(INSTALLDIR))
