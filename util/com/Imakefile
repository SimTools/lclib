#define LCLIB_TMPL "../../config/lclib.tmpl"
#include LCLIB_TMPL

#ifdef DOSHRLIB
LIBCOM = libCOM.sl
LIBCLI = ../../lib/libCLI.sl
#else
LIBCOM = libCOM.a
LIBCLI = ../../lib/libCLI.a
#endif
OBJS = chval.o comctrlc.o comhelp.o comutl.o crange.o inquire.o \
       modbits.o modval.o procmode.o showit.o switch.o telbit.o \
       tellit.o screen.o signal.o

LIBNAME	      = COM
INSTALLDIR = ../../lib

ALLOBJ = $(OBJS)

#ifdef DOSHRLIB
SharedLibraryTarget($(LIBNAME),$(SOREV),$(ALLOBJ),.,.)
InstallSharedLibrary($(LIBNAME),$(SOREV),$(INSTALLDIR))
#endif
NormalLibraryTarget($(LIBNAME), $(ALLOBJ) )
InstallLibrary($(LIBNAME),$(INSTALLDIR))


comtest :: comtest.o $(LIBCOM) $(LIBCLI)
	f77 -o comtest comtest.o $(LIBCOM) $(LIBCLI) -lU77

clean::
	rm -f $(OBJS)

# end of Makefile

